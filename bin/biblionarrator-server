#!/usr/bin/env node
var argv = require('optimist')
    .usage('Usage: $0 -p [port] -c [config]')
    .argv;

if (typeof argv.c !== 'undefined') {
    var environment = require('../src/lib/environment').load(argv.c);
}
argv.c = argv.c || 'defaults';
var server = require('../src/server');
var port = argv.p || 3000;

server.listen(port);
console.log('Listening on port ' + port + ' using configuration from ' + argv.c);

process.on('SIGINT', function () {
    process.exit();
});
